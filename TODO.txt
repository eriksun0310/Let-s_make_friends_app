列下時間：2024/12/08
接下來要做的清單
➖➖➖➖➖➖➖➖➖
➖✏️ 以後要做的 
➖🧭 邏輯        
➖🐛 BUG          
➖✅ 已完成     
➖➖➖➖➖➖➖➖➖



➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖
✏️[聊天室]
✅1. 測試有新用戶的話,傳第一則訊息, 會不會即時顯示在訊息列表中
✅2. 顯示bottom icon 有提示數字(加好友、聊天室)
✅3. 紀錄用戶是否在線上 user_online_status
✅4. 串接 傳送新訊息的邏輯, 如果不在線上 則要更新chat_rooms 的對方未讀數量 
5. 刪除聊天室, 並刪除聊天紀錄
6. 雙方都刪除聊天室的話, 把messages 全都清除
7. 推播 Push notifications(ex:像line 跳出通知)

➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖
🧭[刪除聊天室邏輯]
user1_id:A 、user2_id:B
✅1. 資料庫: A 還有6則未讀訊息, A 刪除 B 聊天室, 資料庫更新  chat_rooms =>  user1_deleted:true、unread_count_user1:0, 但是不更新messages 的6則未讀訊息, 如果B再傳訊息給A, A點進已讀
✅2. UI 呈現: B 上面6則未讀, 第7則已讀, 在第7則的訊息上面 備註 ----以下為查看訊息----
✅3. 聊天列表取資料要排除 user1_deleted:true、user2_deleted:true
4. 測試 user1_deleted:true + user2_deleted:true , messages 的訊息有沒有刪掉



➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖

✏️[加好友]
✅1.顯示bottom icon 有提示數字/亮燈
➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖

🐛[聊天室 BUG]
✅1.當沒有已讀過的話,已讀數量會是正確的, 但是當點進聊天室的話, 就不會在更新已讀的數量
✅2. 當使用者沒有登入時, 傳訊息給使用者不會記錄db 的未讀
✅目前有寫一個provider, 不過 要重新測試了 在聊天列表的未讀訊息、聊天室內的即時更新、已讀狀態
✅3.當新聊天室 傳送第一則訊息 , 聊天室會先loading, 然後第一則訊息會不見
4.更新未讀數量失敗 JSON object requested, multiple (or no) rows returned(好像只會出現在 直接從db 刪掉資料的情況下)

➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖
🐛[好友列表 BUG]
1. 點了好友資訊, 再點聊天室, 返回好友資訊, 返回好友列表 , 左上的返回鍵會消失

➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖➖
🐛[登入 BUG]
2024/12/14 
1.不確定是不是常態, 當我註冊新用戶的時候, 用ios 按下登入expo 會報錯 跳出整個應用程式,但是當是舊用戶 就不會有這個問題 (如果新用戶填個人資料的清況下登入)
用android 的話就不會有這個問題
